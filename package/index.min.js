/**
 * PriorityMenu  1.0.2
 * GitHub template for starting new projects
 * https://github.com/Fapalz/priority-menu#readme
 *
 * Copyright 2020-2022 Gladikov Kirill - Fapalz <blacesmot@gmail.com>
 *
 * Released under the MIT License
 *
 * Released on: February 16, 2022
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).PriorityMenu=e()}(this,(function(){"use strict";function t(t,e){if("inner"===e)return t.clientWidth;if("outer"===e)return t.offsetWidth;var i=window.getComputedStyle(t,null);return"width"===e?t.clientWidth-parseInt(i.getPropertyValue("padding-left"),10)-parseInt(i.getPropertyValue("padding-right"),10):"full"===e?t.offsetWidth+parseInt(i.getPropertyValue("margin-left"),10)+parseInt(i.getPropertyValue("margin-right"),10):null}return function(){function e(t,i){try{if(this.options=e.mergeSettings(i),this.element="string"==typeof t?document.querySelector(t):t,!(o=this.element)||1!==o.nodeType)throw new Error("Element shold be is ELEMENT_NODE, check your parameter");this.resizeListener=null,this.isInit=!1,this.matchMedia=!1,window.matchMedia&&this.options.breakpointDestroy?(this.matchMedia=window.matchMedia(this.options.breakpointDestroy),this.matchMediaListener=this.matchMediaListener.bind(this),this.matchMedia.addEventListener("change",this.matchMediaListener),this.matchMediaListener(this.matchMedia)):this.init()}catch(t){console.error(t)}var o}e.mergeSettings=function(t){var e={containerSelector:!1,containerWidthOffset:10,itemsListSelector:!1,delay:100,breakpointDestroy:!1,updateWidthOnResize:!1,dropdownMenuId:!1,dropdownLabel:'More <i class="caret"></i>',dataMenu:"data-priority-menu",dataMenuList:"data-priority-menu-list",dataStableItem:"data-priority-menu-stable",dataOverflowItem:"data-priority-menu-overflow",menuItemClass:"dropdown",dropdownToogleClass:"dropdown-toggle",dropdownMenuClass:"dropdown-menu",dropdownMenuTemplate:'<li {{dataMenu}} class="{{menuItemClass}}" aria-hidden="true"><a id="{{dropdownMenuId}}" href="#" class="{{dropdownToogleClass}}" role="button" aria-haspopup="true" aria-expanded="false">{{dropdownLabel}}</a><ul class="{{dropdownMenuClass}}" {{dataMenuList}} aria-labelledby="{{dropdownMenuId}}"></ul></li>',moved:function(){},movedBack:function(){},init:function(){},initLayout:function(){},ready:function(){},destroy:function(){}};return Object.keys(t).forEach((function(i){e[i]=t[i]})),e};var i=e.prototype;return i.matchMediaListener=function(t){t.matches?this.isInit&&this.destroy():this.isInit||this.init()},i.createOverflowMenu=function(){var t=this.itemsList.querySelector("["+this.options.dataMenu+"]");if(!t){var e=this.options.dropdownMenuId?this.options.dropdownMenuId:"priority-menu-more-"+function(t){for(var e="";e.length<t;)e+=Math.random().toString(36).substring(2);return e.substring(0,t)}(6),i=this.options.dropdownMenuTemplate.replace("{{dropdownLabel}}",this.options.dropdownLabel).replace("{{menuItemClass}}",this.options.menuItemClass).replace("{{dropdownToogleClass}}",this.options.dropdownToogleClass).replace("{{dropdownMenuClass}}",this.options.dropdownMenuClass).replace("{{dataMenu}}",this.options.dataMenu).replace("{{dataMenuToggle}}",this.options.dataMenuToggle).replace("{{dataMenuList}}",this.options.dataMenuList).replace(new RegExp("{{dropdownMenuId}}","g"),e),o=document.createElement("div");o.innerHTML=i,t=this.itemsList.appendChild(o.firstChild)}if(!t)throw new Error("overflowMenu does not exist, check your custom dropdownMenuTemplate parameter");return t},i.getBreakpoints=function(){for(var e=[],i=this.itemsList.children,o=i.length,n=0,s=0,r=0;r<o;r+=1){var a=i[r];a.hasAttribute(this.options.dataMenu)||(a.hasAttribute(this.options.dataStableItem)?n+=Math.ceil(t(a,"full")):(s+=Math.ceil(t(a,"full")),e.push(s)))}return this.stableItemsWidth=n,e},i.attachEvents=function(){var t,e,i,o,n;0===this.options.delay?this.resizeListener=this.reflowNavigation.bind(this):this.resizeListener=(t=this.reflowNavigation,e=this.options.delay,i=this,void 0===e&&(e=250),function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];var h=i||this,l=+new Date;o&&l<o+e?(clearTimeout(n),n=setTimeout((function(){o=l,t.apply(h,r)}),e)):(o=l,t.apply(h,r))}),window.addEventListener("resize",this.resizeListener)},i.detachEvents=function(){window.removeEventListener("resize",this.resizeListener),this.resizeListener=null},i.updateDropdownMenuWidth=function(){var e=this.overflowList.children.length;if(e<=0)this.dropdownMenuWidth=0;else{if(e>0&&this.dropdownMenuWidth>0&&!this.options.updateWidthOnResize)return this.dropdownMenuWidth;this.dropdownMenuWidth=Math.ceil(t(this.overflowMenu,"full"))}return this.dropdownMenuWidth},i.updateContainerWidth=function(){return this.containerWidth=Math.floor(t(this.container,"width")-this.options.containerWidthOffset),this.containerWidth},i.updateItemsWidth=function(){this.removeAllFromOverflow(),this.breakpoints=this.getBreakpoints()},i.getAvailableContainerWidth=function(){return this.containerWidth-this.stableItemsWidth-this.dropdownMenuWidth},i.addToOverflow=function(t,e){return t.setAttribute(this.options.dataOverflowItem,!0),this.overflowList.insertBefore(t,this.overflowList.firstChild),this.overflowBreakpoints.unshift(e),this.breakpoints.pop(),this.options.moved.call(this,t,this),this.overflowBreakpoints},i.removeFromOverflow=function(t,e){return t.removeAttribute(this.options.dataOverflowItem),this.breakpoints.push(e),this.overflowBreakpoints.shift(),this.itemsList.insertBefore(t,this.overflowMenu),this.options.movedBack.call(this,t,this),this.overflowBreakpoints},i.toggleOverflowDropdown=function(t){return this.overflowMenu.setAttribute("aria-hidden",t)},i.getCountOverflowItems=function(){for(var t=this.overflowList.children,e=0,i=0;i<t.length;i+=1)t[i].hasAttribute(this.options.dataOverflowItem)&&(e+=1);return e},i.reflowNavigation=function(){if(!this.resizeListener)return!1;this.options.updateWidthOnResize&&this.updateItemsWidth();for(var t=this.itemsList.children,e=[],i=0;i<t.length;i+=1){var o=t[i];o.hasAttribute(this.options.dataMenu)||o.hasAttribute(this.options.dataStableItem)||e.push(o)}this.updateDropdownMenuWidth(),this.updateContainerWidth();for(var n=e.length;n;){n-=1;var s=this.breakpoints[n];s>=this.getAvailableContainerWidth()&&(this.addToOverflow(e[n],s),this.updateDropdownMenuWidth())}for(var r=this.getCountOverflowItems();r;)r-=1,(this.overflowBreakpoints[0]<this.getAvailableContainerWidth()||!this.overflowAlways&&this.overflowBreakpoints[this.overflowBreakpoints.length-1]<this.getAvailableContainerWidth()+this.dropdownMenuWidth)&&(this.removeFromOverflow(this.overflowList.children[0],this.overflowBreakpoints[0]),this.updateDropdownMenuWidth());return this.toggleOverflowDropdown(0===this.overflowList.children.length)},i.removeAllFromOverflow=function(){for(var t=this.getCountOverflowItems();t;)t-=1,this.removeFromOverflow(this.overflowList.children[0],this.overflowBreakpoints[0])},i.destroy=function(){return this.detachEvents(),this.removeAllFromOverflow(),this.toggleOverflowDropdown(0===this.overflowList.children.length),this.isInit=!1,this.options.destroy.call(this,this),this.element},i.init=function(){if(!this.isInit)try{if(this.options.init.call(this,this),this.container=void 0,this.itemsList=void 0,this.containerWidth=0,this.dropdownMenuWidth=0,this.stableItemsWidth=0,this.container=this.options.containerSelector&&this.element.querySelectorAll(this.options.containerSelector)[0]?this.element.querySelectorAll(this.options.containerSelector)[0]:this.element,this.itemsList=this.options.itemsListSelector&&this.element.querySelectorAll(this.options.itemsListSelector)[0]?this.element.querySelectorAll(this.options.itemsListSelector)[0]:this.element,this.overflowMenu=this.createOverflowMenu(),this.overflowList=this.overflowMenu.querySelector("["+this.options.dataMenuList+"]")||this.overflowMenu.querySelectorAll("ul")[0],!this.overflowList)throw new Error("overflowList does not exist, check your custom dropdownMenuTemplate parameter");this.overflowAlways=this.overflowList.children.length>0,this.overflowBreakpoints=[],this.options.initLayout.call(this,this),this.breakpoints=this.getBreakpoints(),this.attachEvents(),this.reflowNavigation(),this.isInit=!0,this.options.ready.call(this,this)}catch(t){console.error(t)}},e}()}));
//# sourceMappingURL=index.min.js.map